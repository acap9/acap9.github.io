(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6134],{65141:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news",function(){return n(53865)}])},53865:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(34051),a=n.n(r),o=n(85893),i=n(67294),s=n(9473),l=n(99960),c=n(87357),u=n(47418),d=n.n(u);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var t=(0,i.useState)(null),n=t[0],r=t[1],a=function(){return r(null)},s=(0,i.useState)([]),l=s[0],c=s[1];return(0,i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("readNews")||"[]");c(e)}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:d().newsContainer,children:e.data.map((function(t){var n;return(0,o.jsxs)("div",{className:d().newsCard,style:{backgroundColor:"#f1f1f0b1",overflow:"hidden"},onClick:function(){return function(t){r(t),e.handleOpenArticle(t.id);var n=JSON.parse(localStorage.getItem("readNews")||"[]"),a=new Set(n);a.add(t.id),localStorage.setItem("readNews",JSON.stringify(m(a)))}(t)},children:[!l.includes(t.id)&&(0,o.jsx)("div",{style:{position:"absolute"},children:(0,o.jsx)("span",{style:(n={backgroundColor:"floralwhite",fontSize:"11px",padding:"5px"},p(n,"backgroundColor","red"),p(n,"color","white"),n),children:" New "})}),(0,o.jsx)("div",{className:d().imageContainer,children:(0,o.jsx)("img",{src:t.image||"/placeholder.jpg",alt:t.title})}),(0,o.jsxs)("div",{className:d().content,children:[(0,o.jsxs)("div",{className:d().newsHeader,children:[(0,o.jsx)("h2",{children:t.title}),t.date_created&&(0,o.jsx)("span",{className:d().newsDate,children:new Date(1e3*t.date_created).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]}),(0,o.jsx)("p",{className:d().newsBody,children:t.body})]})]},t.id)}))}),n&&(0,o.jsx)("div",{className:d().modalOverlay,onClick:a,children:(0,o.jsxs)("div",{className:d().modalContent,onClick:function(e){return e.stopPropagation()},children:[(0,o.jsx)("button",{className:d().closeButton,onClick:a,children:"\xd7"}),(0,o.jsx)("h2",{children:n.title}),(0,o.jsx)("p",{className:d().modalDate,children:new Date(1e3*n.date_created).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:n.fullMessageHtml}}),n.image&&(0,o.jsx)("img",{src:n.image,alt:n.title,className:d().modalImage})]})})]})},h=n(71824),v=n(86204);function y(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){y(o,r,a,i,s,"next",e)}function s(e){y(o,r,a,i,s,"throw",e)}i(void 0)}))}}var b=function(){var e=(0,s.I0)(),t=(0,s.v9)((function(e){return e.news})),n=t.items,r=t.hasMore,u=t.status,d=(0,i.useRef)(null);(0,i.useEffect)((function(){var t=function(){var t=g(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.a)("pwa_push_notifications",10,null);case 2:n=t.sent,d.current=n.lastDoc,e({type:"fetch/news/fulfilled",payload:{news:n.news,hasMore:n.hasMore}});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var f=function(){var t=g(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&"loading"!==u){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,l.a)("pwa_push_notifications",10,d.current);case 4:n=t.sent,d.current=n.lastDoc,e({type:"fetch/news/fulfilled",payload:{news:n.news,hasMore:n.hasMore}});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=(0,s.v9)((function(e){return e.news.items})).filter((function(e){return!e.isRead})).length;return(0,i.useEffect)((function(){"setAppBadge"in navigator&&"clearAppBadge"in navigator&&(p>0?navigator.setAppBadge(p):navigator.clearAppBadge())}),[p]),(0,o.jsxs)(c.Z,{children:[(0,o.jsx)("h1",{children:" News and Notifications "}),(0,o.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,o.jsx)(v.nf8,{color:"darkblue"}),(0,o.jsx)("span",{style:{color:"gray",cursor:"pointer",fontSize:"12px"},onClick:function(){e((0,h.SF)()),"clearAppBadge"in navigator&&navigator.clearAppBadge()},children:" Mark all as read"})]})}),(0,o.jsx)(w,{data:n,handleOpenArticle:function(t){e((0,h.zJ)(t))}}),(0,o.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r&&(0,o.jsx)("button",{onClick:f,style:{backgroundColor:"#232C5E",border:"none",outline:"none",padding:"15px 30px",cursor:"pointer",borderRadius:"22px",color:"white"},children:"idle"===u?"Loading...":"Load More ..."})})]})}},47418:function(e){e.exports={newsContainer:"Newslist_newsContainer__eRJ6M",newsCard:"Newslist_newsCard__CjFNv",imageContainer:"Newslist_imageContainer__ybX3W",content:"Newslist_content__OInn0",newsHeader:"Newslist_newsHeader__RVUqj",newsDate:"Newslist_newsDate__J43qY",newsBody:"Newslist_newsBody__idVDI",modalOverlay:"Newslist_modalOverlay__43soP",modalContent:"Newslist_modalContent__TUW1r",slideDown:"Newslist_slideDown__uR_mJ",modalImage:"Newslist_modalImage__b00Rl",closeButton:"Newslist_closeButton__hl_h3",modalDate:"Newslist_modalDate__lKJlJ"}},25054:function(e,t,n){"use strict";n.d(t,{w_:function(){return p}});var r=n(67294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(a),i=["attr","size","title"];function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return e&&e.map(((e,t)=>r.createElement(e.tag,u({key:t},e.attr),f(e.child))))}function p(e){return t=>r.createElement(m,l({attr:u({},e.attr)},t),f(e.child))}function m(e){var t=t=>{var n,{attr:a,size:o,title:c}=e,d=s(e,i),f=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:n,style:u(u({color:e.color||t.color},t.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==o?r.createElement(o.Consumer,null,(e=>t(e))):t(a)}}},function(e){e.O(0,[4396,9774,2888,179],(function(){return t=65141,e(e.s=t);var t}));var t=e.O();_N_E=t}]);