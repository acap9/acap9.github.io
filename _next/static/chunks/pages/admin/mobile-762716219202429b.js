(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6503],{42604:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/mobile",function(){return t(4146)}])},70044:function(e,n){"use strict";n.Z={profileContainer:{display:"flex",flexDirection:"column",width:"100%"},profileCard:{padding:"22px",display:"flex",flexDirection:"column",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"15px",maxWidth:"600px",margin:"auto",borderColor:"#E2E8F0"},textfield:{marginTop:function(e){return e.spacing(3)}},button:{marginTop:function(e){return e.spacing(2)},width:"200px"}}},31338:function(e,n,t){"use strict";t.d(n,{x:function(){return c},P:function(){return u}});var r=t(85893),i=t(87357);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=function(e){var n=e.children,t=e.value,c=e.index,u=a(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({role:"tabpanel",hidden:t!==c,id:"custom-tabpanel-".concat(c),"aria-labelledby":"custom-tab-".concat(c)},u,{children:t===c&&(0,r.jsx)(i.Z,{sx:{p:3},children:n})}))};var u=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},4146:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ae}});var r=t(85893),i=t(66383),o=t(95243),a=t(47426),c=t(34051),u=t.n(c),s=t(31338),l=t(38206),f=t(15861),d=t(87357),p=t(88409),h=t(40044),v=t(94054),b=t(47312),y=t(18360),x=t(18972),m=t(37598),O=t(11057),g=t(98456),w=t(86886),j=t(67294),N=t(9473),_=t(70044),I=t(9669),P=t.n(I),S=t(99431),k=t(94763);function A(e,n,t,r,i,o,a){try{var c=e[o](a),u=c.value}catch(s){return void t(s)}c.done?n(u):Promise.resolve(u).then(r,i)}function C(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){A(o,r,i,a,c,"next",e)}function c(e){A(o,r,i,a,c,"throw",e)}a(void 0)}))}}function T(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Z(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,n,t){return n&&Z(e.prototype,n),t&&Z(e,t),e}function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function F(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&W(e,n)}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){R(e,n,t[n])}))}return e}function M(e,n){return!n||"object"!==U(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function W(e,n){return W=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},W(e,n)}var U=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=D(e);if(n){var i=D(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return M(this,t)}}var V={BASE_API_URL:"https://amia-cis-9aoz.onrender.com/api",SAVE_NOTIFICATION:"".concat("https://amia-cis-9aoz.onrender.com/api","/notification"),SEND_NOTIFICATION_PROVINCIAL:"".concat("https://notification-api-server.onrender.com","/send-notification-by-province"),SEND_NOTIFICATION_MUNICIPAL:"".concat("https://notification-api-server.onrender.com","/send-notification-by-municipalities"),SEND_NOTIFICATION_PROVINCIAL_LOCAL:"http://localhost:5000/send-notification-by-province",SEND_NOTIFICATION_MUNICIPAL_LOCAL:"http://localhost:5000/send-notification-by-municipalities",SAVE_NOTIFICATION_LOCAL:"http://localhost:3001/api/notification",SEND_PWA_NOTIF_URL_LOCAL:"http://localhost:5000/pwa-notify",SEND_PWA_NOTIF_URL_PROD:"".concat("https://notification-api-server.onrender.com","/pwa-notify")},q=function(e){F(t,e);var n=B(t);function t(){return T(this,t),n.apply(this,arguments)}return E(t,[{key:"saveNotificationMessage",value:function(e){var n=this;return C(u().mark((function t(){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"push_notifications",r=n.collection(n.db,"push_notifications"),t.next=4,n.addDoc(r,e);case 4:case"end":return t.stop()}}),t)})))()}}]),t}(k.Z),z=function(e){F(t,e);var n=B(t);function t(){return T(this,t),n.apply(this,arguments)}return E(t,[{key:"savePWAnotification",value:function(e){var n=this;return C(u().mark((function t(){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"pwa_push_notifications",r=n.collection(n.db,"pwa_push_notifications"),t.next=4,n.addDoc(r,e);case 4:case"end":return t.stop()}}),t)})))()}}]),t}(k.Z),H=function(e){F(t,e);var n=B(t);function t(){return T(this,t),n.apply(this,arguments)}return E(t,[{key:"saveNotificationMessage",value:function(e){var n=this;return C(u().mark((function t(){var r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObject({body:e});case 2:return r=t.sent,t.next=5,P()(L({},r,{url:V.SAVE_NOTIFICATION,method:"POST"}));case 5:return i=t.sent,t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t)})))()}},{key:"sendNotificationMessageProvincial",value:function(e){var n=this;return C(u().mark((function t(){var r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("URL",V.SEND_NOTIFICATION_PROVINCIAL),t.next=3,n.createRequestObjectNotif({body:e});case 3:return r=t.sent,t.next=6,P()(L({},r,{url:V.SEND_NOTIFICATION_PROVINCIAL,method:"POST"}));case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}),t)})))()}},{key:"sendNotificationMessageMunicipal",value:function(e){var n=this;return C(u().mark((function t(){var r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("URL",V.SEND_NOTIFICATION_MUNICIPAL),t.next=3,n.createRequestObjectNotif({body:e});case 3:return r=t.sent,t.next=6,P()(L({},r,{url:V.SEND_NOTIFICATION_MUNICIPAL,method:"POST"}));case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}),t)})))()}},{key:"sendPwaNotif",value:function(e){var n=this;return C(u().mark((function t(){var r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObjectNotif({body:e});case 2:return r=t.sent,t.next=5,P()(L({},r,{url:V.SEND_PWA_NOTIF_URL_PROD,method:"POST"}));case 5:return i=t.sent,t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t)})))()}}]),t}(S.Z),X=new H,G=new q,J=new z,Q=(G.saveNotificationMessage.bind(G),X.sendNotificationMessageMunicipal.bind(X),X.sendNotificationMessageProvincial.bind(X),X.sendPwaNotif.bind(X)),K=J.savePWAnotification.bind(J),Y=t(8465),$=t(4936),ee=(0,t(5152).default)((function(){return t.e(7661).then(t.t.bind(t,72911,23))}),{loadableGenerated:{webpack:function(){return[72911]}},ssr:!1});function ne(e){var n=(0,j.useRef)(null);return(0,r.jsx)(ee,{ref:n,defaultValue:e.value,config:{readonly:!1,height:400},onBlur:function(n){return e.handleEdit(n)}})}function te(e,n,t,r,i,o,a){try{var c=e[o](a),u=c.value}catch(s){return void t(s)}c.done?n(u):Promise.resolve(u).then(r,i)}function re(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ie(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){re(e,n,t[n])}))}return e}var oe=function(){var e=(0,N.I0)(),n=(0,j.useState)(0),t=n[0],i=n[1],o=(0,j.useState)(null),a=o[0],c=o[1],I=(0,j.useState)(null),P=I[0],S=I[1],k=(0,j.useState)([]),A=(k[0],k[1]),C=(0,j.useState)("Zamboanga del Sur"),T=(C[0],C[1],(0,j.useState)("Dumalinao")),Z=(T[0],T[1],(0,j.useState)(!1)),E=Z[0],R=Z[1],D=(0,j.useState)(!1),F=D[0],L=D[1],M=(0,j.useState)(null),W=M[0],U=M[1],B=(0,j.useState)(""),V=B[0],q=B[1],z=(0,j.useState)(""),H=z[0],X=z[1],G=(0,j.useState)(""),J=G[0],ee=G[1],re=(0,j.useState)(null),oe=re[0],ae=re[1],ce={title:"10-Day Farm Weather Outlook is ready!",body:"Based on the forecast for ".concat(oe,", a new recommendation is available to help improve your farm\u2019s resilience to changing weather conditions.")},ue='<div>\n<div>\n<div>\n<div><strong>10-Day Farm Weather Outlook is ready!</strong></div>\n</div>\n</div>\n<div>&nbsp;</div>\n<div>Based on the forecast for&nbsp; <span style="background-color: #00ff00; padding: 1px 10px; border-radius: 5px;">'.concat(oe,"</span>&nbsp; -&nbsp; a new recommendation is&nbsp; available to help improve your farm&rsquo;s resilience to changing weather conditions.</div>\n</div>"),se=(0,N.v9)((function(e){return e.tendayweather})).entities,le=(0,N.v9)((function(e){return e.provinces})),fe=le.ids,de=le.municipalities;(0,j.useEffect)((function(){if(0===fe.length&&0===de.length)e((0,$.Q)());else{var n=Object.keys(de);A(n)}}),[e,de,fe.length]),(0,j.useEffect)((function(){var e,n;if(se){var t=null===(n=null===(e=Object.values(se).map((function(e){return{data:JSON.parse(null===e||void 0===e?void 0:e.data)}}))[0])||void 0===e?void 0:e.data[0])||void 0===n?void 0:n.date_range;ae(t)}}),[se]);var pe=function(){var e,n=(e=u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),(n={body:"10-Day Farm Weather Outlook and Advisory"===a?ce.body:H,fullMessageHtml:"10-Day Farm Weather Outlook and Advisory"===a?ce.body:J,date_created:Math.floor(Date.now()/1e3),dateRange:oe,title:a,image:P,link:V}).body&&n.dateRange){e.next=6;break}return console.warn("INFO: Missing parameters!"),R(!1),e.abrupt("return");case 6:return e.prev=6,e.next=10,Q(n);case 10:if(!e.sent.success){e.next=17;break}return e.next=14,K(n);case 14:U("Notification sent!"),e.next=18;break;case 17:U("Notification not sent!");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),console.log("ERROR: Error sending push notification!",e.t0),U("Error sending push notification!");case 24:return e.prev=24,R(!1),L(!0),e.finish(24);case 28:case"end":return e.stop()}}),e,null,[[6,20,24,28]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){te(o,r,i,a,c,"next",e)}function c(e){te(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[(0,r.jsx)(Y.Z,{open:F,autoHideDuration:3e3,onClose:function(e,n){"clickaway"!==n&&L(!1)},children:(0,r.jsx)(l.Z,{style:{backgroundColor:"white",color:"blue"},message:(0,r.jsxs)("span",{id:"client-snackbar",children:[" ",W," "]})})}),(0,r.jsx)(f.Z,{variant:"h5",children:"Mobile App Management"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:" Trigger push notifications"})," of generated Crop Recommendations, Weather Updates and send them to different individuals via Mobile Application."]}),(0,r.jsx)(d.Z,{sx:_.Z.tabsContainer,children:(0,r.jsxs)(d.Z,{sx:_.Z.tabsContainer,children:[(0,r.jsx)(p.Z,{value:t,onChange:function(e,n){i(n)},"aria-label":"Tabs",children:(0,r.jsx)(h.Z,ie({label:"Send Notification"},(0,s.P)(0)))}),(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(s.x,{value:t,index:0,children:[(0,r.jsxs)(d.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(v.Z,{sx:{width:"100%",mb:2},children:[(0,r.jsx)(b.Z,{id:"notif-type",children:" Notification Title  "}),(0,r.jsxs)(y.Z,{labelId:"notif-type",id:"notif-type",value:a,label:"Notification Type",onChange:function(e){c(e.target.value)},children:[(0,r.jsx)(x.Z,{value:"Weather Advisory ",children:" Weather Advisory "}),(0,r.jsx)(x.Z,{value:"Mindanao Weather Forecast ",children:" Mindanao Weather Forecast "}),(0,r.jsx)(x.Z,{value:"10-Day Farm Weather Outlook and Advisory",children:" 10-Day Farm Weather Outlook and Advisory "}),(0,r.jsx)(x.Z,{value:"Regional Seasonal Climate Outlook and Advisory",children:" Regional Seasonal Climate Outlook and Advisory "}),(0,r.jsx)(x.Z,{value:"System Updates",children:" System Updates "})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(m.Z,{"aria-label":"minimum height",minRows:2,placeholder:"One paragraph description of the subject",style:{width:"100%"},onChange:function(e){X(e.target.value)},value:H}),(0,r.jsx)("br",{}),(0,r.jsx)(f.Z,{variant:"h7",children:"Notification Body (Full Content) "}),(0,r.jsx)(d.Z,{sx:{width:"100%"},children:(0,r.jsx)(ne,{value:"10-Day Farm Weather Outlook and Advisory"===a?ue:J,handleEdit:function(e){ee(e)}})}),(0,r.jsx)("br",{}),(0,r.jsx)(m.Z,{"aria-label":"minimum height",minRows:2,placeholder:"Place image url here...",style:{width:"100%"},onChange:function(e){S(e.target.value)},value:P}),(0,r.jsx)("br",{}),(0,r.jsx)(m.Z,{"aria-label":"minimum height",minRows:2,placeholder:"Redirect url",style:{width:"100%"},onChange:function(e){q(e.target.value)},value:V}),(0,r.jsx)(O.Z,{onClick:pe,disabled:E,variant:"contained",sx:{width:300,m:2},children:!0===E?(0,r.jsxs)(r.Fragment,{children:[" Sending...",(0,r.jsx)(g.Z,{color:"secondary"})," "]}):"Send Notification"})]}),(0,r.jsx)(d.Z,{sx:{width:"100%",display:"flex"}})]}),(0,r.jsx)(s.x,{value:t,index:1,children:(0,r.jsx)(w.ZP,{container:!0,children:(0,r.jsx)(w.ZP,{item:!0,xs:12,md:4})})})]})]})})]})};var ae=(0,o.Z)((function(e){return(0,r.jsx)(i.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:a.DW.ADMIN,children:(0,r.jsx)(oe,{})})}))}},function(e){e.O(0,[5778,3593,9964,1757,6223,3028,1727,8465,6572,2284,1050,9774,2888,179],(function(){return n=42604,e(e.s=n);var n}));var n=e.O();_N_E=n}]);