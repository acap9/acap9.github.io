(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9472],{63023:function(e,n){"use strict";var t=60103,r=60106,o=60107,i=60108,a=60114,c=60109,l=60110,s=60112,u=60113,d=60120,p=60115,f=60116,m=60121,x=60122,h=60117,b=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var v=Symbol.for;t=v("react.element"),r=v("react.portal"),o=v("react.fragment"),i=v("react.strict_mode"),a=v("react.profiler"),c=v("react.provider"),l=v("react.context"),s=v("react.forward_ref"),u=v("react.suspense"),d=v("react.suspense_list"),p=v("react.memo"),f=v("react.lazy"),m=v("react.block"),x=v("react.server.block"),h=v("react.fundamental"),b=v("react.debug_trace_mode"),g=v("react.legacy_hidden")}function y(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case t:switch(e=e.type){case o:case a:case i:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case s:case f:case p:case c:return e;default:return n}}case r:return n}}}},76607:function(e,n,t){"use strict";t(63023)},94811:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/report/view",function(){return t(56044)}])},22757:function(e,n){"use strict";n.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},headerText:{marginBottom:"32px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"top"},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(5)},"& p, ul, ol":{fontSize:"14px"}},recSeasonalStage:{marginTop:function(e){return e.spacing(5)},marginBottom:function(e){return e.spacing(2)},textDecoration:"underline"},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},pdfcontent:{ul:{paddingLeft:3}}}},56044:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return V}});var r=t(34051),o=t.n(r),i=t(85893),a=t(67294),c=t(9473),l=t(11163),s=t(95243),u=t(66383),d=t(45697),p=t.n(d),f=t(87357),m=t(11057),x=t(56863),h=t(67720),b=t(88409),g=t(40044),v=t(15861),y=t(16759),j=t(37634),w=t(19227),S=t(901),Z=t(27392),k=t(38199),O=t(69437),C=t(22757),B=t(77841),_=t(15799),D=t(71927),E=t(98396);function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){T(e,n,t[n])}))}return e}function P(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var F=(0,_.Z)();function I(e){var n=e.children,t=e.value,r=e.index,o=P(e,["children","value","index"]);return o.smallscreen&&(o.smallscreen=o.smallscreen.toString()),(0,i.jsx)("div",R({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},o,{children:t===r&&(0,i.jsx)(f.Z,{sx:{p:o.smallscreen?2:3,whiteSpace:(null===e||void 0===e?void 0:e.smsstyle)||"normal"},children:n})}))}function N(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function L(e){var n,t=e.report,r=e.loading,o=e.onBackBtnClick,l=e.onDeleteClick,s=e.onSmsBtnClick,u=(0,a.useState)(0),d=u[0],p=u[1],_=(0,O.Z)(t,[k.X3.REGION,k.X3.TYPE,k.X3.UID,k.X3.ID]).fieldValues,T=(0,c.v9)((function(e){return e.reports})),P=T.status,L=T.error,z=(0,E.Z)(F.breakpoints.between("xs","md"));return(0,i.jsx)("div",{children:r||t.loading?(0,i.jsx)(y.Z,{}):void 0!==t.stages?(0,i.jsxs)(f.Z,{container:!0,sx:C.Z.container,children:[(0,i.jsxs)(f.Z,{sx:{marginBottom:"32px",display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(D.Z,{theme:F,children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(v.Z,{variant:"h5",children:"Crop Recommendation Summary"}),(0,i.jsx)(v.Z,{variant:"h6",children:Z.eT[t.type]})]})}),(0,i.jsxs)(x.Z,{orientation:z?"vertical":"horizontal",children:[(0,i.jsx)(m.Z,{disableElevation:!0,color:"primary",sx:R({},C.Z.button,{color:function(e){return e.palette.primary.main}}),variant:"outlined",onClick:s,children:"SMS"}),(0,i.jsx)(w.Z,{isOpen:!1,maxWidth:"sm",openButtonText:"Delete",title:"Delete Report",contentText:""!==t.info?t.info:"Are you sure you want to delete this Bulletin report log?",confirmBtnText:""!==t.info?"Ok":"Delete",modalConfirmHandlerCB:l,loading:P===S.G.PENDING,modalButtonStyles:{borderRadius:0,width:"100%"},children:""!==L&&(0,i.jsx)(v.Z,{variant:"caption",sx:{color:"red"},children:L})}),(0,i.jsx)(m.Z,{disableElevation:!0,color:"primary",variant:"contained",sx:C.Z.button,onClick:o,children:"Back"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(f.Z,{sx:B.Z.details,children:[_.map((function(e){return(0,i.jsx)("div",{children:(0,i.jsxs)(v.Z,{variant:"body2",children:[(0,i.jsxs)("strong",{children:[null===e||void 0===e?void 0:e.label,": "]})," ",null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"-"]})},e.id)})),(0,i.jsxs)(v.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"ID:"})," ",t.id]})]}),(0,i.jsx)(h.Z,{sx:{marginTop:"32px"}})]}),(0,i.jsxs)(f.Z,{sx:{width:"100%"},children:[(0,i.jsx)(f.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(b.Z,{value:d,onChange:function(e,n){p(n)},"aria-label":"basic tabs example",children:[(0,i.jsx)(g.Z,R({label:"PDF FORM"},N(0))),(0,i.jsx)(g.Z,R({label:"SMS FORM"},N(1)))]})}),(0,i.jsx)(I,{value:d,index:0,smallscreen:!!z||void 0,smsstyle:"normal",children:(0,i.jsx)(f.Z,{sx:R({},{ul:z?C.Z.pdfcontent.ul:"none"},{hr:B.Z.htmlReportHR},B.Z.content),dangerouslySetInnerHTML:{__html:t.recommendations}})}),(0,i.jsx)(I,{value:d,index:1,smsstyle:"pre-wrap",children:(0,i.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:t.smsRecommendations||(0,i.jsx)("span",{style:{color:"#ff1744"},children:"No SMS Recommendations available."})})})]})]}):(0,i.jsx)(j.Z,{})})}F.typography.h5=T({fontSize:"1.2rem","@media (min-width:600px)":{fontSize:"1.5rem"}},F.breakpoints.up("md"),{fontSize:"2rem"}),I.propTypes={children:p().node,index:p().number.isRequired,value:p().number.isRequired},L.propTypes={report:p().object,loading:p().bool,onBackBtnClick:p().func,onDeleteClick:p().func,onSmsBtnClick:p().func};var z=L,M=t(12671),W=t(47426),X=t(77715),q=t(61690),A=t(87006);function H(e,n,t,r,o,i,a){try{var c=e[i](a),l=c.value}catch(s){return void t(s)}c.done?n(l):Promise.resolve(l).then(r,o)}function $(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){H(i,r,o,a,c,"next",e)}function c(e){H(i,r,o,a,c,"throw",e)}a(void 0)}))}}function G(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){G(e,n,t[n])}))}return e}var U={loading:!0,error:"",info:"",deleting:!1};var V=(0,s.Z)((function(e){var n=(0,a.useState)(U),t=n[0],r=n[1],s=(0,l.useRouter)(),d=(0,c.I0)();(0,a.useEffect)((function(){d((0,M.s_)())}),[d]),(0,a.useEffect)((function(){if(t.loading&&Object.keys(s.query).length>0){var e=function(){var e=$(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,A.QL)(s.query.docId);case 3:n=e.sent,t=n.date_created.toDate(),n.date_created="".concat(t.toDateString()," ").concat(t.toLocaleTimeString("it-IT",X.W6)),r((function(e){return Q({},e,{loading:!1},n)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(Q({},U,{loading:!1,error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}}),[s,t.loading]);var p=function(){var e=$(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===t.info?d((0,q.Ee)(t.id)).unwrap().then((function(){r((function(e){return Q({},e,{deleting:!1,info:"Report deleted."})}))})):s.push("/admin/bulletins/crops");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(u.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:W.DW.ADMIN,children:(0,i.jsx)(z,{report:t,loading:e.loading,onBackBtnClick:function(){s.push("/admin/bulletins/crops")},onDeleteClick:p,onSmsBtnClick:function(){s.push({pathname:"/admin/sms/viewSMS",query:{docId:t.id}})}})})}))}},function(e){e.O(0,[5778,3593,9964,8858,6279,542,7944,6572,986,1050,2774,9774,2888,179],(function(){return n=94811,e(e.s=n);var n}));var n=e.O();_N_E=n}]);