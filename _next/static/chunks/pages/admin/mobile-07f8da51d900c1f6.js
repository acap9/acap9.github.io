(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6503],{42604:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/mobile",function(){return n(4146)}])},70044:function(e,t){"use strict";t.Z={profileContainer:{display:"flex",flexDirection:"column",width:"100%"},profileCard:{padding:"22px",display:"flex",flexDirection:"column",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"15px",maxWidth:"600px",margin:"auto",borderColor:"#E2E8F0"},textfield:{marginTop:function(e){return e.spacing(3)}},button:{marginTop:function(e){return e.spacing(2)},width:"200px"}}},31338:function(e,t,n){"use strict";n.d(t,{x:function(){return c},P:function(){return s}});var r=n(85893),i=n(87357);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=e.value,c=e.index,s=a(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({role:"tabpanel",hidden:n!==c,id:"custom-tabpanel-".concat(c),"aria-labelledby":"custom-tab-".concat(c)},s,{children:n===c&&(0,r.jsx)(i.Z,{sx:{p:3},children:t})}))};var s=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},4146:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ae}});var r=n(85893),i=n(66383),o=n(95243),a=n(47426),c=n(34051),s=n.n(c),u=n(31338),l=n(38206),f=n(15861),d=n(87357),p=n(88409),h=n(40044),v=n(94054),b=n(47312),y=n(18360),x=n(18972),m=n(37598),O=n(11057),g=n(98456),w=n(86886),j=n(67294),N=n(9473),_=n(70044),I=n(9669),P=n.n(I),S=n(99431),k=n(94763);function C(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,i)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){C(o,r,i,a,c,"next",e)}function c(e){C(o,r,i,a,c,"throw",e)}a(void 0)}))}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function F(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function M(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e,t){return W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W(e,t)}var U=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}var V={BASE_API_URL:"https://amia-cis-9aoz.onrender.com/api",SAVE_NOTIFICATION:"".concat("https://amia-cis-9aoz.onrender.com/api","/notification"),SEND_NOTIFICATION_PROVINCIAL:"".concat("https://notification-api-server.onrender.com","/send-notification-by-province"),SEND_NOTIFICATION_MUNICIPAL:"".concat("https://notification-api-server.onrender.com","/send-notification-by-municipalities"),SEND_NOTIFICATION_PROVINCIAL_LOCAL:"http://localhost:5000/send-notification-by-province",SEND_NOTIFICATION_MUNICIPAL_LOCAL:"http://localhost:5000/send-notification-by-municipalities",SAVE_NOTIFICATION_LOCAL:"http://localhost:3001/api/notification",SEND_PWA_NOTIF_URL_LOCAL:"http://localhost:5000/pwa-notify",SEND_PWA_NOTIF_URL_PROD:"".concat("https://notification-api-server.onrender.com","/pwa-notify")},q=function(e){F(n,e);var t=B(n);function n(){return T(this,n),t.apply(this,arguments)}return E(n,[{key:"saveNotificationMessage",value:function(e){var t=this;return A(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"push_notifications",r=t.collection(t.db,"push_notifications"),n.next=4,t.addDoc(r,e);case 4:case"end":return n.stop()}}),n)})))()}}]),n}(k.Z),z=function(e){F(n,e);var t=B(n);function n(){return T(this,n),t.apply(this,arguments)}return E(n,[{key:"savePWAnotification",value:function(e){var t=this;return A(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"pwa_push_notifications",r=t.collection(t.db,"pwa_push_notifications"),n.next=4,t.addDoc(r,e);case 4:case"end":return n.stop()}}),n)})))()}}]),n}(k.Z),H=function(e){F(n,e);var t=B(n);function n(){return T(this,n),t.apply(this,arguments)}return E(n,[{key:"saveNotificationMessage",value:function(e){var t=this;return A(s().mark((function n(){var r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,P()(L({},r,{url:V.SAVE_NOTIFICATION,method:"POST"}));case 5:return i=n.sent,n.abrupt("return",i.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"sendNotificationMessageProvincial",value:function(e){var t=this;return A(s().mark((function n(){var r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("URL",V.SEND_NOTIFICATION_PROVINCIAL),n.next=3,t.createRequestObjectNotif({body:e});case 3:return r=n.sent,n.next=6,P()(L({},r,{url:V.SEND_NOTIFICATION_PROVINCIAL,method:"POST"}));case 6:return i=n.sent,n.abrupt("return",i.data);case 8:case"end":return n.stop()}}),n)})))()}},{key:"sendNotificationMessageMunicipal",value:function(e){var t=this;return A(s().mark((function n(){var r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("URL",V.SEND_NOTIFICATION_MUNICIPAL),n.next=3,t.createRequestObjectNotif({body:e});case 3:return r=n.sent,n.next=6,P()(L({},r,{url:V.SEND_NOTIFICATION_MUNICIPAL,method:"POST"}));case 6:return i=n.sent,n.abrupt("return",i.data);case 8:case"end":return n.stop()}}),n)})))()}},{key:"sendPwaNotif",value:function(e){var t=this;return A(s().mark((function n(){var r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObjectNotif({body:e});case 2:return r=n.sent,n.next=5,P()(L({},r,{url:V.SEND_PWA_NOTIF_URL_PROD,method:"POST"}));case 5:return i=n.sent,n.abrupt("return",i.data);case 7:case"end":return n.stop()}}),n)})))()}}]),n}(S.Z),X=new H,J=new q,Q=new z,G=(J.saveNotificationMessage.bind(J),X.sendNotificationMessageMunicipal.bind(X),X.sendNotificationMessageProvincial.bind(X),X.sendPwaNotif.bind(X)),K=Q.savePWAnotification.bind(Q),Y=n(8465),$=n(4936),ee=n(72983);function te(e){return(0,r.jsx)(ee.ZP,{value:e.value,onChange:e.handleEdit,containerProps:{style:{resize:"vertical"}}})}function ne(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,i)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){re(e,t,n[t])}))}return e}var oe=function(){var e=(0,N.I0)(),t=(0,j.useState)(0),n=t[0],i=t[1],o=(0,j.useState)(null),a=o[0],c=o[1],I=(0,j.useState)(null),P=I[0],S=I[1],k=(0,j.useState)([]),C=(k[0],k[1]),A=(0,j.useState)("Zamboanga del Sur"),T=(A[0],A[1],(0,j.useState)("Dumalinao")),Z=(T[0],T[1],(0,j.useState)(!1)),E=Z[0],R=Z[1],D=(0,j.useState)(!1),F=D[0],L=D[1],M=(0,j.useState)(null),W=M[0],U=M[1],B=(0,j.useState)(""),V=B[0],q=B[1],z=(0,j.useState)(""),H=z[0],X=z[1],J=(0,j.useState)(""),Q=J[0],ee=J[1],re=(0,j.useState)(null),oe=re[0],ae=re[1],ce={title:"10-Day Farm Weather Outlook is ready!",body:"Based on the forecast for ".concat(oe,", a new recommendation is available to help improve your farm\u2019s resilience to changing weather conditions.")},se='<div>\n<div>\n<div>\n<div><strong>10-Day Farm Weather Outlook is ready!</strong></div>\n</div>\n</div>\n<div>&nbsp;</div>\n<div>Based on the forecast for&nbsp; <span style="background-color: #00ff00; padding: 1px 10px; border-radius: 5px;">'.concat(oe,"</span>&nbsp; -&nbsp; a new recommendation is&nbsp; available to help improve your farm&rsquo;s resilience to changing weather conditions.</div>\n</div>"),ue=(0,N.v9)((function(e){return e.tendayweather})).entities,le=(0,N.v9)((function(e){return e.provinces})),fe=le.ids,de=le.municipalities;(0,j.useEffect)((function(){if(0===fe.length&&0===de.length)e((0,$.Q)());else{var t=Object.keys(de);C(t)}}),[e,de,fe.length]),(0,j.useEffect)((function(){var e,t;if(ue){var n=null===(t=null===(e=Object.values(ue).map((function(e){return{data:JSON.parse(null===e||void 0===e?void 0:e.data)}}))[0])||void 0===e?void 0:e.data[0])||void 0===t?void 0:t.date_range;ae(n)}}),[ue]);var pe=function(){var e,t=(e=s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),(t={body:"10-Day Farm Weather Outlook and Advisory"===a?ce.body:H,fullMessageHtml:"10-Day Farm Weather Outlook and Advisory"===a?ce.body:Q,date_created:Math.floor(Date.now()/1e3),dateRange:oe,title:a,image:P,link:V}).body&&t.dateRange){e.next=6;break}return console.warn("INFO: Missing parameters!"),R(!1),e.abrupt("return");case 6:return e.prev=6,e.next=10,G(t);case 10:if(!e.sent.success){e.next=17;break}return e.next=14,K(t);case 14:U("Notification sent!"),e.next=18;break;case 17:U("Notification not sent!");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),console.log("ERROR: Error sending push notification!",e.t0),U("Error sending push notification!");case 24:return e.prev=24,R(!1),L(!0),e.finish(24);case 28:case"end":return e.stop()}}),e,null,[[6,20,24,28]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ne(o,r,i,a,c,"next",e)}function c(e){ne(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[(0,r.jsx)(Y.Z,{open:F,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&L(!1)},children:(0,r.jsx)(l.Z,{style:{backgroundColor:"white",color:"blue"},message:(0,r.jsxs)("span",{id:"client-snackbar",children:[" ",W," "]})})}),(0,r.jsx)(f.Z,{variant:"h5",children:"Mobile App Management"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:" Trigger push notifications"})," of generated Crop Recommendations, Weather Updates and send them to different individuals via Mobile Application."]}),(0,r.jsx)(d.Z,{sx:_.Z.tabsContainer,children:(0,r.jsxs)(d.Z,{sx:_.Z.tabsContainer,children:[(0,r.jsx)(p.Z,{value:n,onChange:function(e,t){i(t)},"aria-label":"Tabs",children:(0,r.jsx)(h.Z,ie({label:"Send Notification"},(0,u.P)(0)))}),(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(u.x,{value:n,index:0,children:[(0,r.jsxs)(d.Z,{sx:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(v.Z,{sx:{width:600,mb:2},children:[(0,r.jsx)(b.Z,{id:"notif-type",children:" Notification Title  "}),(0,r.jsxs)(y.Z,{labelId:"notif-type",id:"notif-type",value:a,label:"Notification Type",onChange:function(e){c(e.target.value)},children:[(0,r.jsx)(x.Z,{value:"Weather Advisory ",children:" Weather Advisory "}),(0,r.jsx)(x.Z,{value:"Mindanao Weather Forecast ",children:" Mindanao Weather Forecast "}),(0,r.jsx)(x.Z,{value:"10-Day Farm Weather Outlook and Advisory",children:" 10-Day Farm Weather Outlook and Advisory "}),(0,r.jsx)(x.Z,{value:"Regional Seasonal Climate Outlook and Advisory",children:" Regional Seasonal Climate Outlook and Advisory "}),(0,r.jsx)(x.Z,{value:"System Updates",children:" System Updates "})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(m.Z,{"aria-label":"minimum height",minRows:2,placeholder:"One paragraph description of the subject",style:{width:600},onChange:function(e){X(e.target.value)},value:H}),(0,r.jsx)("br",{}),(0,r.jsx)(f.Z,{variant:"h7",children:"Notification Body (Full Content) "}),(0,r.jsx)(d.Z,{sx:{width:"55%"},children:(0,r.jsx)(te,{value:"10-Day Farm Weather Outlook and Advisory"===a?se:Q,handleEdit:function(e){ee(e.target.value)}})}),(0,r.jsx)("br",{}),(0,r.jsx)(m.Z,{"aria-label":"minimum height",minRows:2,placeholder:"Place image url here...",style:{width:600},onChange:function(e){S(e.target.value)},value:P}),(0,r.jsx)("br",{}),(0,r.jsx)(m.Z,{"aria-label":"minimum height",minRows:2,placeholder:"Redirect url",style:{width:600},onChange:function(e){q(e.target.value)},value:V}),(0,r.jsx)(O.Z,{onClick:pe,disabled:E,variant:"contained",sx:{width:300,m:2},children:!0===E?(0,r.jsxs)(r.Fragment,{children:[" Sending...",(0,r.jsx)(g.Z,{color:"secondary"})," "]}):"Send Notification"})]}),(0,r.jsx)(d.Z,{sx:{width:"100%",display:"flex"}})]}),(0,r.jsx)(u.x,{value:n,index:1,children:(0,r.jsx)(w.ZP,{container:!0,children:(0,r.jsx)(w.ZP,{item:!0,xs:12,md:4})})})]})]})})]})};var ae=(0,o.Z)((function(e){return(0,r.jsx)(i.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:a.DW.ADMIN,children:(0,r.jsx)(oe,{})})}))}},function(e){e.O(0,[5778,3593,9964,1757,6223,3028,1727,8465,6572,6448,1050,9774,2888,179],(function(){return t=42604,e(e.s=t);var t}));var t=e.O();_N_E=t}]);